import ProjectsDetails from '../models/projectDetails';
import IgniteMetadeta from '../models/igniteMetadeta';


async function createProjectDetailsTable() {
    return new Promise((resolve, reject) => {

        let projectDetails = new ProjectsDetails();
        try {
            console.log("Checking if ProjectDetails table exists in DB or not");

            let projectDetailsSchema = projectDetails.projectDetailsSchema;

            projectDetailsSchema.sync({ force: false }).then((result) => {
                projectDetails.sequelizeConnection.close();
                resolve(true);
            }).catch(err => {
                console.error("ProjectDetails table was not synced properly" + err);
                resolve(false);
            });

        } catch (e) {
            console.error(e);
            resolve(false);
        }
    });
}

async function createIgniteMetadataTable() {
    return new Promise((resolve, reject) => {

        let igniteMetadeta = new IgniteMetadeta();
        try {
            console.log("Checking if Ignite Metadata table exists in DB or not");

            let igniteMetadetaSchema = igniteMetadeta.igniteMetadetaSchema;

            igniteMetadetaSchema.sync({ force: false }).then((result) => {
                igniteMetadeta.sequelizeConnection.close();
                resolve(true);
            }).catch(err => {
                console.error("createIgniteMetadataTable() - Ignite Metadata table was not synced properly" + err);
                resolve(false);
            });

        } catch (e) {
            console.error(e);
            resolve(false);
        }
    });
}

module.exports = {
    createProjectDetailsTable: createProjectDetailsTable,
    createIgniteMetadataTable: createIgniteMetadataTable
};
